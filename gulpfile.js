"use strict";function asyncGeneratorStep(e,i,t,r,n,p,l){try{var u=e[p](l),s=u.value}catch(e){return void t(e)}u.done?i(s):Promise.resolve(s).then(r,n)}function _asyncToGenerator(u){return function(){var e=this,l=arguments;return new Promise(function(i,t){var r=u.apply(e,l);function n(e){asyncGeneratorStep(r,i,t,n,p,"next",e)}function p(e){asyncGeneratorStep(r,i,t,n,p,"throw",e)}n(void 0)})}}var gulp=require("gulp"),cleanCSS=require("gulp-clean-css"),htmlmin=require("gulp-htmlmin"),htmlclean=require("gulp-htmlclean"),imagemin=require("gulp-imagemin"),uglify=require("gulp-uglify"),babel=require("gulp-babel");gulp.task("compress",function(){return gulp.src(["./public/**/*.js","!./public/**/*.min.js"]).pipe(babel({presets:["@babel/preset-env"]})).pipe(uglify().on("error",function(e){console.log(e)})).pipe(gulp.dest("./public"))}),gulp.task("minify-css",function(){return gulp.src("./public/**/*.css").pipe(cleanCSS({compatibility:"ie11"})).pipe(gulp.dest("./public"))}),gulp.task("minify-html",function(){return gulp.src("./public/**/*.html").pipe(htmlclean()).pipe(htmlmin({removeComments:!0,collapseWhitespace:!0,collapseBooleanAttributes:!0,removeEmptyAttributes:!0,removeScriptTypeAttributes:!0,removeStyleLinkTypeAttributes:!0,minifyJS:!0,minifyCSS:!0,minifyURLs:!0})).pipe(gulp.dest("./public"))}),gulp.task("minify-images",_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:gulp.src("./public/img/**/*.*").pipe(imagemin({optimizationLevel:5,progressive:!0,interlaced:!1,multipass:!1})).pipe(gulp.dest("./public/img"));case 1:case"end":return e.stop()}},e)}))),gulp.task("default",gulp.parallel("compress","minify-css","minify-html","minify-images"));